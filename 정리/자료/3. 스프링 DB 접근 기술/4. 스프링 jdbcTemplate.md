# ğŸ“˜ ìŠ¤í”„ë§ jdbcTemplate

## 1. í•™ìŠµ ëª©í‘œ

- jdbcTemplate ì‹¤í–‰

## 2. ìŠ¤í”„ë§ jdbcTemplate

ğŸ’¡ jdbcTemplate API ì£¼ì†Œ
:: <br> [https://docs.spring.io/spring-framework/docs/current/javadoc- api/org/springframework/jdbc/core/JdbcTemplate.html](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html)

<br>

### 2.1 EmployeeRepositoryInterface.java

```
package com.sch.springboot.repository;

import com.sch.springboot.dto.Employee;

import java.util.List;

public interface EmployeeRepositoryInterface {
    List<Employee> selectAll();
    int insert(Employee employee);
}

```

### 2.2 JdbcTemplateEmployeeRepository.java

<!-- <img src="../images/7/19.png" alt="project" width="500"/><br><br> -->

```java
package com.sch.springboot.repository;

import com.sch.springboot.dto.Employee;
import org.springframework.jdbc.core.BeanPropertyRowMapper;
import org.springframework.jdbc.core.RowMapper;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.stereotype.Repository;

import javax.sql.DataSource;
import java.util.ArrayList;
import java.util.List;

@Repository
public class JdbcTemplateEmployeeRepository implements EmployeeRepositoryInterface {
    //ì‚¬ì›ê°ì²´ë¥¼ ì €ì¥í•˜ëŠ” List<Employee>
    private List<Employee> list = new ArrayList<Employee>();
    private final JdbcTemplate jdbcTemplate;

    public JdbcTemplateEmployeeRepository(DataSource dataSource) {
        this.jdbcTemplate = new JdbcTemplate(dataSource);
    }

    /** ì‚¬ì› ë“±ë¡ */
    @Override
    public int insert(Employee employee) {
        String sql = "insert into employee (name, address, department) VALUES (?, ?, ?)";
        int rows = jdbcTemplate.update(sql, employee.getName(), employee.getAddress(), employee.getDepartment());
        return rows;
    }

    /** ì‚¬ì› ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ */
    @Override
    public List<Employee> selectAll() {
        String sql = "SELECT sno, name, address, department FROM employee";
        return jdbcTemplate.query(sql,
                BeanPropertyRowMapper.newInstance(Employee.class));
    }
}

```

<br>

### 2.3 EmployeeService.java

- memberDao ê°ì²´ì˜ í´ë˜ìŠ¤ íƒ€ì… â‡’ JdbcTemplateMemberRepository í´ë˜ìŠ¤ íƒ€ì…ìœ¼ë¡œ ìˆ˜ì •

```java
package com.sch.springboot.service;

import com.sch.springboot.dto.Employee;
import com.sch.springboot.repository.EmployeeRepository;
import com.sch.springboot.repository.JdbcTemplateEmployeeRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import java.util.List;

@Service
public class EmployeeService {

    private final JdbcTemplateEmployeeRepository employeeRepository;

    @Autowired
    public EmployeeService(JdbcTemplateEmployeeRepository employeeRepository) {
        this.employeeRepository = employeeRepository;
    }

    //ì‚¬ì›ë¦¬ìŠ¤íŠ¸
    public List<Employee> findAll(){
        return employeeRepository.selectAll();
    }

    //ì‚¬ì›ë“±ë¡
    public int register(Employee employee) {
        return employeeRepository.insert(employee);
    }
}


```

### 2.4 React - App.js

- ì‚¬ì›ë“±ë¡ ê²°ê³¼ : rows ê°’ìœ¼ë¡œ ë¦¬í„´

```
 axios
      .post("http://localhost:8080/api/employees/register", data)
      .then((response) => {
        // console.log(response.data);
        if (response.data === 1) {
          alert("ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤");
          props.handleChangePage("home");
        }
      })
      .catch((error) => {
        console.log(error);
      });
```
